<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<p>Local Page ! </p>
<script type="text/javascript">
    var state = 0;
    var iframe = document.createElement('iframe');
    var loadfn = function() {
//        if (state === 1) {
//            var data = iframe.contentWindow.name;    // 读取数据
//            alert(data);    //弹出'I was there!'
//        } else if (state === 0) {
//            state = 1;
//            iframe.contentWindow.location = "http://a.com/proxy.html";    // 设置的代理文件
//        }
        iframe.contentWindow.name = "name";
//        return;
//        iframe.contentWindow.buddle = "buddle";
//        var crossData = {A:"1"};
//        setInterval(function() {
//            console.info(JSON.stringify(crossData));
//            crossData.A = new Date().getTime();
//        }, 3000);
//
//        iframe.contentWindow.data = crossData;
    };
    iframe.src = 'http://192.168.2.77/JSDemo/demo/browser_cross_site/outerDomain.html';
    if (iframe.attachEvent) {
        iframe.attachEvent('onload', loadfn);
    } else {
        iframe.onload  = loadfn;
    }
    document.body.appendChild(iframe);
</script>
</body>
</html>